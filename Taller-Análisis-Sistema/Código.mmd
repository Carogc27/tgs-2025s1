flowchart TB 

%%Entorno externo sistema hospitalario

 subgraph Entorno["**ENTORNO**"]
        Paciente([**Paciente**])
        Doctor([**Doctor**])
        Proveedor([**Proveedor**])
        Gobierno([**Gobierno**])
 end


 subgraph Sistema["**SISTEMA HOSPITALARIO**"]
        E1([**Recepción de Datos del Paciente**])
        E2([**Gestión de Citas**])
        P1([**Atención Médica**])
        P2([**Laboratorio y Diagnóstico**])
        P3([**Gestión de Medicamentos**])
        S1([**Historial Clínico**])
        S2([**Recetas Médicas**])
        S3([**Reportes a Entes Gubernamentales**])
        R1([**Encuesta de Satisfacción**])
        R2([**Revisión de Calidad**])
 end

  %%Flujo del sistema

    Paciente --> E1
    Doctor --> E1
    Proveedor --> P3
    Gobierno --> S3
    E1 --> E2
    E2 --> P1
    P1 --> P2 & S2
    P2 --> P3
    P3 --> S1 & S2
    S1 --> R1 & Paciente
    S2 --> R1 & Doctor

%%Retroalimentación del proceso   
    R1 --> R2
    R2 --> P1 & P2
    S3 --> R2 & Gobierno

    style Paciente fill:#bbdefb, stroke:#072d84,stroke-width:4px
    style Doctor fill:#bbdefb, stroke:#072d84,stroke-width:4px
    style Proveedor fill:#bbdefb, stroke:#072d84,stroke-width:4px
    style Gobierno fill:#bbdefb, stroke:#072d84,stroke-width:4px
    style Entorno fill:#bbdefb,stroke:#072d84,stroke-width:6px
    style Sistema fill:#ffcdd2, stroke:#8e200d,stroke-width:6px
    style E1 fill:#ffcdd2, stroke:#8e200d,stroke-width:4px
    style E2 fill:#ffcdd2, stroke:#8e200d,stroke-width:4px
    style P1 fill:#ffcdd2, stroke:#8e200d,stroke-width:4px
    style P2 fill:#ffcdd2, stroke:#8e200d,stroke-width:4px
    style P3 fill:#ffcdd2, stroke:#8e200d,stroke-width:4px
    style S1 fill:#ffcdd2, stroke:#8e200d,stroke-width:4px
    style S2 fill:#ffcdd2, stroke:#8e200d,stroke-width:4px
    style S3 fill:#ffcdd2, stroke:#8e200d,stroke-width:4px
    style R1 fill:#ffcdd2, stroke:#8e200d,stroke-width:4px
    style R2 fill:#ffcdd2, stroke:#8e200d,stroke-width:4px
    linkStyle 0,1,2,3,12,14,19 stroke:#072d84,stroke-width:3px,color:red,fill:none
    linkStyle 4,5,6,7,8,9,10,11,13,15,16,17,18 stroke:#8e200d,stroke-width:3px,color:red,fill:none
